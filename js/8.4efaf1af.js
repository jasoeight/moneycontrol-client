(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{XXAr:function(t,n,o){"use strict";o.r(n);var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("layout-main",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"my-3",attrs:{xs12:""}},[o("account-table",{ref:"table",on:{edit:t.onEdit,add:t.onAdd}})],1),t.showForm?o("v-flex",{attrs:{xs12:""}},[o("account-form",{ref:"form",on:{cancel:t.onCancel,stored:t.onStored},model:{value:t.form,callback:function(n){t.form=n},expression:"form"}})],1):t._e()],1)},a=[],i=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("v-card",[o("v-card-title",[o("v-spacer"),o("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(n){t.$emit("add")}}},[o("v-icon",[t._v("add")]),t._v(" Add\n        ")],1)],1),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,pagination:t.pagination,"total-items":t.totalItems,loading:t.loading},on:{"update:pagination":function(n){t.pagination=n}},scopedSlots:t._u([{key:"items",fn:function(n){return[o("td",[t._v(t._s(n.item.name))]),o("td",{staticClass:"justify-center layout px-0"},[o("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(o){t.onEdit(n.item)}}},[o("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),o("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(o){t.onDelete(n.item)}}},[o("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[o("template",{slot:"no-data"},[o("v-alert",{attrs:{value:!t.loading,color:"error",icon:"warning"}},[t._v("\n                Sorry, nothing to display here\n            ")])],1)],2)],1)},s=[],c=o("yT7P"),r=o("oQp2"),l=o("lfAH"),d={data:function(){return{totalItems:0,items:[],loading:!0,pagination:{sortBy:"name",descending:!0,page:1,rowsPerPage:10},headers:[{text:"Name",sortable:!0,value:"name"},{text:"Actions",sortable:!1,value:"_id"}]}},watch:{pagination:{handler:"load",deep:!0}},methods:Object(c["a"])({},r["a"],l["a"],{load:function(){var t=this;this.loading=!0;var n=this.pagination,o=n.sortBy,e=n.descending,a=n.page,i=n.rowsPerPage;this.fetchAllAccounts({sortBy:o,sortDir:e?"desc":"asc",page:a,limit:i}).then(function(n){var o=n.data;t.loadFinished(o.rows,o.count)}).catch(function(){t.loadFinished([],0)})},loadFinished:function(t,n){this.items=t,this.totalItems=n,this.loading=!1},onEdit:function(t){this.$emit("edit",t)},onDelete:function(t){var n=this,o=t._id;this.hasNoTransactions(o).then(function(){n.deleteAccount(o).then(n.load)}).catch(function(){n.$dialog.alert("Cannot remove account because of existing references in some transactions.",{okText:"Ok"})})},hasNoTransactions:function(t){var n=this;return new Promise(function(o,e){n.fetchAllTransactions({search:{accountId:t},limit:1,noPopulate:1}).then(function(t){var n=t.data;0!==n.count?e():o()}).catch(function(t){e()})})}})},u=d,f=o("KHd+"),h=Object(f["a"])(u,i,s,!1,null,null,null),m=h.exports,v=o("BkRI"),p=o.n(v),g={components:{AccountTable:m,AccountForm:function(){return o.e(4).then(o.bind(null,"Azlv"))}},data:function(){return{showForm:!1,form:{}}},methods:{onAdd:function(){this.form={},this.showForm=!0},onCancel:function(){this.showForm=!1,this.form={}},onEdit:function(t){t=p()(t),this.form=t,this.showForm=!0},onStored:function(){this.showForm=!1,this.form={},this.$refs.table.load()}}},b=g,w=Object(f["a"])(b,e,a,!1,null,null,null);n["default"]=w.exports},oQp2:function(t,n,o){"use strict";o.d(n,"a",function(){return a});var e=o("L2JU"),a=Object(e["b"])("accounts",["saveAccount","deleteAccount","fetchAllAccounts","fetchOneAccount"])}}]);
//# sourceMappingURL=8.4efaf1af.js.map