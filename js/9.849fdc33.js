(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"ZsS/":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-main",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"my-3",attrs:{xs12:""}},[n("transaction-table",{ref:"table",on:{edit:t.onEdit,add:t.onAdd}})],1),t.showForm?n("v-flex",{attrs:{xs12:""}},[n("transaction-form",{ref:"form",on:{cancel:t.onCancel,stored:t.onStored},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1):t._e()],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",{staticClass:"primary white--text py-1 px-2"},[n("h2",[t._v("Search")]),n("v-spacer"),n("v-btn",{attrs:{small:""},on:{click:function(e){t.showSearchForm=!t.showSearchForm}}},[n("v-icon",[t._v(t._s(t.showSearchForm?"expand_less":"expand_more"))])],1)],1),t.showSearchForm?n("transaction-search-form",{on:{search:t.onSearch}}):t._e(),n("v-card-title",{staticClass:"primary white--text py-1 px-2"},[n("h2",[t._v("Results")]),n("v-spacer"),n("v-btn",{attrs:{small:""},on:{click:function(e){t.$emit("add")}}},[n("v-icon",[t._v("add")]),t._v(" Add\n        ")],1)],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,pagination:t.pagination,"total-items":t.totalItems,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.user.name))]),n("td",[t._v(t._s(e.item.account.name))]),n("td",[t._v(t._s(t.formattedDate(e.item.date)))]),n("td",[t._v(t._s(t.formattedType(e.item.type)))]),n("td",[t._v(t._s(e.item.description))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(t.formattedAmount(e.item.amount)))]),n("td",[t._v(t._s(t.formattedTags(e.item.tags)))]),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.onEdit(e.item)}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.onDelete(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!t.loading,color:"error",icon:"warning"}},[t._v("\n                Sorry, nothing to display here\n            ")])],1)],2)],1)},i=[],s=n("yT7P"),c=n("lfAH"),l=n("yNUO"),d=n.n(l),u=n("gQMU"),f=n.n(u),m={components:{TransactionSearchForm:function(){return n.e(5).then(n.bind(null,"CzxW"))}},data:function(){return{showSearchForm:!1,search:{},totalItems:0,items:[],loading:!0,pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:10},headers:[{text:"User",sortable:!0,value:"user"},{text:"Account",sortable:!0,value:"account"},{text:"Date",sortable:!0,value:"date"},{text:"Type",sortable:!0,value:"type"},{text:"Description",sortable:!0,value:"description"},{text:"Amount",sortable:!0,value:"amount"},{text:"Tags",sortable:!1,value:"tags"},{text:"Actions",sortable:!1,value:"_id"}]}},watch:{pagination:{handler:"load",deep:!0}},methods:Object(s["a"])({},c["a"],{onSearch:function(t){var e={};Object.keys(t).forEach(function(n){""===t[n]||t[n]instanceof Array&&0===t[n].length||(e[n]=t[n])}),this.search=e,this.pagination.page=1,this.load()},load:function(){var t=this;this.loading=!0;var e=this.pagination,n=e.sortBy,a=e.descending,r=e.page,o=e.rowsPerPage;this.fetchAllTransactions({sortBy:n,sortDir:a?"desc":"asc",page:r,limit:o,search:this.search}).then(function(e){var n=e.data;t.loadFinished(n.rows,n.count)}).catch(function(){t.loadFinished([],0)})},loadFinished:function(t,e){this.items=t,this.totalItems=e,this.loading=!1},formattedDate:function(t){return t=d()(t),t.toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},formattedType:function(t){return f()(t)},formattedAmount:function(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)},formattedTags:function(t){return t.join(", ")},onEdit:function(t){this.$emit("edit",t)},onDelete:function(t){var e=t._id;this.deleteTransaction(e).then(this.load)}})},h=m,p=n("KHd+"),v=Object(p["a"])(h,o,i,!1,null,null,null),g=v.exports,x=n("BkRI"),w=n.n(x),y={components:{TransactionTable:g,TransactionForm:function(){return n.e(1).then(n.bind(null,"mqAy"))}},data:function(){return{showForm:!1,form:{}}},methods:{onAdd:function(){this.form={},this.showForm=!0},onCancel:function(){this.showForm=!1,this.form={}},onEdit:function(t){t=w()(t),t.userId=t.user._id,t.accountId=t.account._id,this.form=t,this.showForm=!0},onStored:function(){this.showForm=!1,this.form={},this.$refs.table.load()}}},_=y,D=Object(p["a"])(_,a,r,!1,null,null,null);e["default"]=D.exports},pzWd:function(t,e){function n(t){return t instanceof Date}t.exports=n},yNUO:function(t,e,n){var a=n("pzWd"),r=36e5,o=6e4,i=2,s=/[T ]/,c=/:/,l=/^(\d{2})$/,d=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],u=/^(\d{4})/,f=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],m=/^-(\d{2})$/,h=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,v=/^-?W(\d{2})$/,g=/^-?W(\d{2})-?(\d{1})$/,x=/^(\d{2}([.,]\d*)?)$/,w=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,_=/([Z+-].*)$/,D=/^(Z)$/,b=/^([+-])(\d{2})$/,T=/^([+-])(\d{2}):?(\d{2})$/;function F(t,e){if(a(t))return new Date(t.getTime());if("string"!==typeof t)return new Date(t);var n=e||{},r=n.additionalDigits;r=null==r?i:Number(r);var s=I(t),c=$(s.date,r),l=c.year,d=c.restDateString,u=C(d,l);if(u){var f,m=u.getTime(),h=0;return s.time&&(h=S(s.time)),s.timezone?f=U(s.timezone):(f=new Date(m+h).getTimezoneOffset(),f=new Date(m+h+f*o).getTimezoneOffset()),new Date(m+h+f*o)}return new Date(t)}function I(t){var e,n={},a=t.split(s);if(c.test(a[0])?(n.date=null,e=a[0]):(n.date=a[0],e=a[1]),e){var r=_.exec(e);r?(n.time=e.replace(r[1],""),n.timezone=r[1]):n.time=e}return n}function $(t,e){var n,a=d[e],r=f[e];if(n=u.exec(t)||r.exec(t),n){var o=n[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(n=l.exec(t)||a.exec(t),n){var i=n[1];return{year:100*parseInt(i,10),restDateString:t.slice(i.length)}}return{year:null}}function C(t,e){if(null===e)return null;var n,a,r,o;if(0===t.length)return a=new Date(0),a.setUTCFullYear(e),a;if(n=m.exec(t),n)return a=new Date(0),r=parseInt(n[1],10)-1,a.setUTCFullYear(e,r),a;if(n=h.exec(t),n){a=new Date(0);var i=parseInt(n[1],10);return a.setUTCFullYear(e,0,i),a}if(n=p.exec(t),n){a=new Date(0),r=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return a.setUTCFullYear(e,r,s),a}if(n=v.exec(t),n)return o=parseInt(n[1],10)-1,k(e,o);if(n=g.exec(t),n){o=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return k(e,o,c)}return null}function S(t){var e,n,a;if(e=x.exec(t),e)return n=parseFloat(e[1].replace(",",".")),n%24*r;if(e=w.exec(t),e)return n=parseInt(e[1],10),a=parseFloat(e[2].replace(",",".")),n%24*r+a*o;if(e=y.exec(t),e){n=parseInt(e[1],10),a=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return n%24*r+a*o+1e3*i}return null}function U(t){var e,n;return e=D.exec(t),e?0:(e=b.exec(t),e?(n=60*parseInt(e[2],10),"+"===e[1]?-n:n):(e=T.exec(t),e?(n=60*parseInt(e[2],10)+parseInt(e[3],10),"+"===e[1]?-n:n):0))}function k(t,e,n){e=e||0,n=n||0;var a=new Date(0);a.setUTCFullYear(t,0,4);var r=a.getUTCDay()||7,o=7*e+n+1-r;return a.setUTCDate(a.getUTCDate()+o),a}t.exports=F}}]);
//# sourceMappingURL=9.849fdc33.js.map