(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"ZsS/":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layout-main",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"my-3",attrs:{xs12:""}},[n("transaction-table",{ref:"table",on:{edit:t.onEdit,add:t.onAdd}})],1),t.showForm?n("v-flex",{attrs:{xs12:""}},[n("transaction-form",{ref:"form",on:{cancel:t.onCancel,stored:t.onStored},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1):t._e()],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("v-spacer"),n("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){t.$emit("add")}}},[n("v-icon",[t._v("add")]),t._v(" Add\n        ")],1)],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,pagination:t.pagination,"total-items":t.totalItems,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.user.name))]),n("td",[t._v(t._s(e.item.account.name))]),n("td",[t._v(t._s(t.formattedDate(e.item.date)))]),n("td",[t._v(t._s(t.formattedType(e.item.type)))]),n("td",[t._v(t._s(e.item.description))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(t.formattedAmount(e.item.amount)))]),n("td",[t._v(t._s(t.formattedTags(e.item.tags)))]),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.onEdit(e.item)}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.onDelete(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!t.loading,color:"error",icon:"warning"}},[t._v("\n                Sorry, nothing to display here\n            ")])],1)],2)],1)},s=[],r=n("yT7P"),c=n("lfAH"),l=n("yNUO"),d=n.n(l),u=n("gQMU"),m=n.n(u),f={data:function(){return{totalItems:0,items:[],loading:!0,pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:10},headers:[{text:"User",sortable:!0,value:"user"},{text:"Account",sortable:!0,value:"account"},{text:"Date",sortable:!0,value:"date"},{text:"Type",sortable:!0,value:"type"},{text:"Description",sortable:!0,value:"description"},{text:"Amount",sortable:!0,value:"amount"},{text:"Tags",sortable:!1,value:"tags"},{text:"Actions",sortable:!1,value:"_id"}]}},watch:{pagination:{handler:"load",deep:!0}},methods:Object(r["a"])({},c["a"],{load:function(){var t=this;this.loading=!0;var e=this.pagination,n=e.sortBy,a=e.descending,o=e.page,i=e.rowsPerPage;this.fetchAllTransactions({sortBy:n,sortDir:a?"desc":"asc",page:o,limit:i}).then(function(e){var n=e.data;t.loadFinished(n.rows,n.count)}).catch(function(){t.loadFinished([],0)})},loadFinished:function(t,e){this.items=t,this.totalItems=e,this.loading=!1},formattedDate:function(t){return t=d()(t),t.toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},formattedType:function(t){return m()(t)},formattedAmount:function(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)},formattedTags:function(t){return t.join(", ")},onEdit:function(t){this.$emit("edit",t)},onDelete:function(t){var e=t._id;this.deleteTransaction(e).then(this.load)}})},h=f,v=n("KHd+"),p=Object(v["a"])(h,i,s,!1,null,null,null),g=p.exports,_=n("mqAy"),y=n("BkRI"),b=n.n(y),w={components:{TransactionTable:g,TransactionForm:_["a"]},data:function(){return{showForm:!1,form:{}}},methods:{onAdd:function(){this.form={},this.showForm=!0},onCancel:function(){this.showForm=!1,this.form={}},onEdit:function(t){t=b()(t),t.userId=t.user._id,t.accountId=t.account._id,this.form=t,this.showForm=!0},onStored:function(){this.showForm=!1,this.form={},this.$refs.table.load()}}},x=w,T=Object(v["a"])(x,a,o,!1,null,null,null);e["default"]=T.exports}}]);
//# sourceMappingURL=6.fc5cf7b5.js.map